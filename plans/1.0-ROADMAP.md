Curb is growing into a reliable tool for handling a cascade of tasks in a loop.

This set of features makes the system more robust and extensible. The overarching goal is making it more likely that the user can have confidence that an autonomous agent will execute.

These features are not in priority or dependency order but collectively point toward something close to a 1.0.

## Observability

* We should store the logs of what the harnesses do. The optional  —stream parameter spits this out to the screen, but we should also write it to disk, associated with the given task. We should also capture other relevant metadata (harness/config used, runtime, ideally, token usage, etc) to that file. When using beads in database mode, we could optionally also store it in the database by extending the schema is the way that is supported by the app.

## Reliability

* When a harness has completed, we should ensure they left things in a clean state. That includes a logical commit and clean working directory.

## Broader harness adoption

* We should throroughly explore better beads/claude code integration given beads’ built in support. that may streamline some of our interactions.

* We should add support for gemini and opencode. We should test both directly and then look at how our (now) four harnesses work and see what makes sense in terms of common structure (without losing features/flags that make each harness unique) as well as provide clear guidance for others to add their own harnesses.

## Token/resource efficiency

* We should explore whether/when to use —continue with an existing session if a task finished with a lot of context window left so that the next task isn’t wasting tokens rebuilding it. This feels experimental and probably off by default for now unless we can ensure reliable execution.

* Alongside specifying the number of iterations to run for, we should also be able to provide other ways of controlling how long this will run. For harnesses using session-based pricing, that could be until that provider has some amount left. For insance, stop if Claude Code’s current session window dips below 20%. We could also give a run a specific token budget (e.g. run for 1M tokens)

## Configuration and usability

* We should add global and project-specific curb configs. This includes harness priority.

* We should add a global onboarding command that checks system dependencies and asks a few questions to set up configs.

## Customization

* We should add a hook-based system allowing for global and per-project extensions to perform certain tasks at different stages in the loop. To that end, we should identify what those loop stages are and enhance the documentation. (Think of this like the Apache web server’s request/response handlers, WordPress’s plugin architecture, etc. I am very open to solutions/appraches that are deemed to be more elegant than these, i’m just eager for the general concept to exist.)

